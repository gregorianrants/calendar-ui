{"ast":null,"code":"'use strict';\n\nconst StrictModeError = require('../../error/strict');\n/*!\n * ignore\n */\n\n\nmodule.exports = function (schematype) {\n  if (schematype.$immutable) {\n    schematype.$immutableSetter = createImmutableSetter(schematype.path, schematype.options.immutable);\n    schematype.set(schematype.$immutableSetter);\n  } else if (schematype.$immutableSetter) {\n    schematype.setters = schematype.setters.filter(fn => fn !== schematype.$immutableSetter);\n    delete schematype.$immutableSetter;\n  }\n};\n\nfunction createImmutableSetter(path, immutable) {\n  return function immutableSetter(v) {\n    if (this == null || this.$__ == null) {\n      return v;\n    }\n\n    if (this.isNew) {\n      return v;\n    }\n\n    const _immutable = typeof immutable === 'function' ? immutable.call(this, this) : immutable;\n\n    if (!_immutable) {\n      return v;\n    }\n\n    const _value = this.$__.$options.priorDoc != null ? this.$__.$options.priorDoc.$__getValue(path) : this.$__getValue(path);\n\n    if (this.$__.strictMode === 'throw' && v !== _value) {\n      throw new StrictModeError(path, 'Path `' + path + '` is immutable ' + 'and strict mode is set to throw.', true);\n    }\n\n    return _value;\n  };\n}","map":{"version":3,"sources":["/home/gregorian/calendar-ui/node_modules/mongoose/lib/helpers/schematype/handleImmutable.js"],"names":["StrictModeError","require","module","exports","schematype","$immutable","$immutableSetter","createImmutableSetter","path","options","immutable","set","setters","filter","fn","immutableSetter","v","$__","isNew","_immutable","call","_value","$options","priorDoc","$__getValue","strictMode"],"mappings":"AAAA;;AAEA,MAAMA,eAAe,GAAGC,OAAO,CAAC,oBAAD,CAA/B;AAEA;AACA;AACA;;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAASC,UAAT,EAAqB;AACpC,MAAIA,UAAU,CAACC,UAAf,EAA2B;AACzBD,IAAAA,UAAU,CAACE,gBAAX,GAA8BC,qBAAqB,CAACH,UAAU,CAACI,IAAZ,EACjDJ,UAAU,CAACK,OAAX,CAAmBC,SAD8B,CAAnD;AAEAN,IAAAA,UAAU,CAACO,GAAX,CAAeP,UAAU,CAACE,gBAA1B;AACD,GAJD,MAIO,IAAIF,UAAU,CAACE,gBAAf,EAAiC;AACtCF,IAAAA,UAAU,CAACQ,OAAX,GAAqBR,UAAU,CAACQ,OAAX,CACnBC,MADmB,CACZC,EAAE,IAAIA,EAAE,KAAKV,UAAU,CAACE,gBADZ,CAArB;AAEA,WAAOF,UAAU,CAACE,gBAAlB;AACD;AACF,CAVD;;AAYA,SAASC,qBAAT,CAA+BC,IAA/B,EAAqCE,SAArC,EAAgD;AAC9C,SAAO,SAASK,eAAT,CAAyBC,CAAzB,EAA4B;AACjC,QAAI,QAAQ,IAAR,IAAgB,KAAKC,GAAL,IAAY,IAAhC,EAAsC;AACpC,aAAOD,CAAP;AACD;;AACD,QAAI,KAAKE,KAAT,EAAgB;AACd,aAAOF,CAAP;AACD;;AAED,UAAMG,UAAU,GAAG,OAAOT,SAAP,KAAqB,UAArB,GACjBA,SAAS,CAACU,IAAV,CAAe,IAAf,EAAqB,IAArB,CADiB,GAEjBV,SAFF;;AAGA,QAAI,CAACS,UAAL,EAAiB;AACf,aAAOH,CAAP;AACD;;AAED,UAAMK,MAAM,GAAG,KAAKJ,GAAL,CAASK,QAAT,CAAkBC,QAAlB,IAA8B,IAA9B,GACb,KAAKN,GAAL,CAASK,QAAT,CAAkBC,QAAlB,CAA2BC,WAA3B,CAAuChB,IAAvC,CADa,GAEb,KAAKgB,WAAL,CAAiBhB,IAAjB,CAFF;;AAGA,QAAI,KAAKS,GAAL,CAASQ,UAAT,KAAwB,OAAxB,IAAmCT,CAAC,KAAKK,MAA7C,EAAqD;AACnD,YAAM,IAAIrB,eAAJ,CAAoBQ,IAApB,EAA0B,WAAWA,IAAX,GAAkB,iBAAlB,GAC9B,kCADI,EACgC,IADhC,CAAN;AAED;;AAED,WAAOa,MAAP;AACD,GAxBD;AAyBD","sourcesContent":["'use strict';\n\nconst StrictModeError = require('../../error/strict');\n\n/*!\n * ignore\n */\n\nmodule.exports = function(schematype) {\n  if (schematype.$immutable) {\n    schematype.$immutableSetter = createImmutableSetter(schematype.path,\n      schematype.options.immutable);\n    schematype.set(schematype.$immutableSetter);\n  } else if (schematype.$immutableSetter) {\n    schematype.setters = schematype.setters.\n      filter(fn => fn !== schematype.$immutableSetter);\n    delete schematype.$immutableSetter;\n  }\n};\n\nfunction createImmutableSetter(path, immutable) {\n  return function immutableSetter(v) {\n    if (this == null || this.$__ == null) {\n      return v;\n    }\n    if (this.isNew) {\n      return v;\n    }\n\n    const _immutable = typeof immutable === 'function' ?\n      immutable.call(this, this) :\n      immutable;\n    if (!_immutable) {\n      return v;\n    }\n\n    const _value = this.$__.$options.priorDoc != null ?\n      this.$__.$options.priorDoc.$__getValue(path) :\n      this.$__getValue(path);\n    if (this.$__.strictMode === 'throw' && v !== _value) {\n      throw new StrictModeError(path, 'Path `' + path + '` is immutable ' +\n        'and strict mode is set to throw.', true);\n    }\n\n    return _value;\n  };\n}\n"]},"metadata":{},"sourceType":"script"}