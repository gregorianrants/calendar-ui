{"ast":null,"code":"var _jsxFileName = \"/home/gregorian/calendar-ui/ui/src/components/forms/AddressInput.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport { Grid, ListItemAvatar, ListItemSecondaryAction, ListItemText, TextField, Typography } from \"@material-ui/core\";\nimport HouseIcon from \"@material-ui/icons/House\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport cuid from \"cuid\";\nimport produce from \"immer\";\nimport { PromiseProvider } from \"mongoose\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(() => createStyles({\n  inline: {\n    display: \"flex\"\n  }\n}));\nexport function ListBuilder({\n  name,\n  value,\n  onChange,\n  label,\n  errors\n}) {\n  _s();\n\n  //TODO should maybe be thinking about a shared constructor for this\n  //we are making an object like this on api as well\n  console.log(errors);\n\n  function wrap(value) {\n    return {\n      _id: cuid(),\n      value\n    };\n  }\n\n  const addAddress = (value, address) => {\n    const updatedValue = produce(value, draft => {\n      console.log(draft);\n      draft.push(wrap(address));\n    });\n    const e = {\n      target: {\n        value: updatedValue,\n        name: name\n      }\n    };\n    onChange(e);\n  };\n\n  const removeAddress = (value, id) => {\n    const updatedValue = produce(value, draft => {\n      return draft.filter(el => el._id !== id);\n    });\n    const e = {\n      target: {\n        value: updatedValue,\n        name: name\n      }\n    };\n    onChange(e);\n  };\n\n  const [input, setInput] = React.useState(\"\");\n  const classes = useStyles();\n\n  function getError(index) {\n    if (errors && errors[index]) {\n      return errors[index].value;\n    }\n\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(List, {\n      dense: true,\n      children: value.map((a, i) => /*#__PURE__*/_jsxDEV(ListItem, {\n        children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n          children: /*#__PURE__*/_jsxDEV(HouseIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n          className: classes.inline,\n          primary: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: a.value\n          }, void 0, false),\n          secondary: getError(i) ? /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"#d32f2f\",\n            children: [\" \", \"- \", getError(i)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            children: [\" - address\", i + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ListItemSecondaryAction, {\n          children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n            color: \"primary\",\n            onClick: e => {\n              e.preventDefault();\n              removeAddress(value, a._id);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, a._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: label,\n        value: input,\n        fullWidth: true,\n        onChange: e => {\n          setInput(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          e.preventDefault();\n          addAddress(value, input);\n          setInput(\"\");\n        },\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ListBuilder, \"uMFfnOEJ+o9kMbaI5GHrHK2+Ci0=\", false, function () {\n  return [useStyles];\n});\n\n_c = ListBuilder;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListBuilder\");","map":{"version":3,"sources":["/home/gregorian/calendar-ui/ui/src/components/forms/AddressInput.js"],"names":["React","List","ListItem","Grid","ListItemAvatar","ListItemSecondaryAction","ListItemText","TextField","Typography","HouseIcon","CloseIcon","createStyles","makeStyles","cuid","produce","PromiseProvider","useStyles","inline","display","ListBuilder","name","value","onChange","label","errors","console","log","wrap","_id","addAddress","address","updatedValue","draft","push","e","target","removeAddress","id","filter","el","input","setInput","useState","classes","getError","index","map","a","i","preventDefault"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport {\n  Grid,\n  ListItemAvatar,\n  ListItemSecondaryAction,\n  ListItemText,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport HouseIcon from \"@material-ui/icons/House\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\n\nimport cuid from \"cuid\";\nimport produce from \"immer\";\nimport { PromiseProvider } from \"mongoose\";\n\nconst useStyles = makeStyles(() =>\n  createStyles({\n    inline: {\n      display: \"flex\",\n    },\n  })\n);\n\nexport function ListBuilder({ name, value, onChange, label, errors }) {\n  //TODO should maybe be thinking about a shared constructor for this\n  //we are making an object like this on api as well\n\n  console.log(errors);\n  function wrap(value) {\n    return {\n      _id: cuid(),\n      value,\n    };\n  }\n\n  const addAddress = (value, address) => {\n    const updatedValue = produce(value, (draft) => {\n      console.log(draft);\n      draft.push(wrap(address));\n    });\n    const e = {\n      target: {\n        value: updatedValue,\n        name: name,\n      },\n    };\n    onChange(e);\n  };\n\n  const removeAddress = (value, id) => {\n    const updatedValue = produce(value, (draft) => {\n      return draft.filter((el) => el._id !== id);\n    });\n    const e = {\n      target: {\n        value: updatedValue,\n        name: name,\n      },\n    };\n    onChange(e);\n  };\n\n  const [input, setInput] = React.useState(\"\");\n\n  const classes = useStyles();\n\n  function getError(index) {\n    if (errors && errors[index]) {\n      return errors[index].value;\n    }\n    return null;\n  }\n\n  return (\n    <>\n      <List dense>\n        {value.map((a, i) => (\n          <ListItem key={a._id}>\n            <ListItemAvatar>\n              <HouseIcon></HouseIcon>\n            </ListItemAvatar>\n            <ListItemText\n              className={classes.inline}\n              primary={<>{a.value}</>}\n              secondary={\n                getError(i) ? (\n                  <Typography variant=\"caption\" color=\"#d32f2f\">\n                    {\" \"}\n                    - {getError(i)}\n                  </Typography>\n                ) : (\n                  <Typography variant=\"caption\"> - address{i + 1}</Typography>\n                )\n              }\n            />\n            <ListItemSecondaryAction>\n              <CloseIcon\n                color=\"primary\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  removeAddress(value, a._id);\n                }}\n              />\n            </ListItemSecondaryAction>\n          </ListItem>\n        ))}\n      </List>\n      <Grid item>\n        <TextField\n          label={label}\n          value={input}\n          fullWidth\n          onChange={(e) => {\n            setInput(e.target.value);\n          }}\n        />\n        <button\n          onClick={(e) => {\n            e.preventDefault();\n            addAddress(value, input);\n            setInput(\"\");\n          }}\n        >\n          +\n        </button>\n      </Grid>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}